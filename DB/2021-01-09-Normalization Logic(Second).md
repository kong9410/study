---
title: 정규화 이론 - 결합 종속성
category: Database
---

# 결합 종속성

4NF 이후에는 결합 종속성에 대한 정규화다. 결합 종속성이란 키 자체에 다중성이 포함됐을 때 나타나는 중복을 말한다.

> A, B, C를 릴레이션 R의 제목의 부분집합이라고 하자. 만일 A, B, C의 프로젝션에 대응하는 릴레이션을 결합한 결과와 R이 같은 경우라면 이 경우에 한해 R은 다음의 결합 종속성을 만족시키게 된다.
>
> ☆{A, B, C}

 A, B, C 제목 중 하나가 R의 제목 전체와 같을 때는 그 결합 종속성이 명백하다고 말한다. 명백하지 않은 결합 종속성이 있으면 그 릴레이션은 4NF~6NF에 의한 정규화의 대상이 된다.

- 결합 종속성은 무손실 분해가 가능하다

프로젝션으로 나눈 릴레이션을 다시 결합하면 원래의 릴레이션으로 돌아가는 성질이 결합 종속성이다. 이를 무손실 분해라고 한다. 무손실 분해가 가능한 것을 결합 종속성이라고 하므로 무손실 분해가 가능하다.

- 함수 종속성은 결합 종속성의 일종이다

무손실 분해가 가능한 것을 결합 종속성이라고 하므로 함수 종속성도 당연히 결합 종속성의 일종이다. 함수 종속성은 특징이 있어서 쉽게 찾을 수 있다는 점이 일반적인 결합 종속성과 다르다고 할 수 있다.

## 암시적인 결합 종속성

릴레이션 R의 제목의 부분집합 A, B, C가 모든 R의 슈퍼키가 되는 경우에도 필연적으로 결합 종속성을 가지게 된다. A, B, C를 결합하면 같은 후보키의 값을 갖는 튜플끼리 결합해 원래의 R로 돌아가기 때문이다. 이와 같은 결합 종속성을 슈퍼키에 의해 암시적으로 정의된다. 이를 암시적인 결합 종속성이라고 한다.

공통의 후보키를 갖는 결합 종속성을 암시적인 결합 종속성이라고 한다.

{이름, 나이, 학년}의 릴레이션이 있을 때 {이름, 나이}, {이름 ,학년}으로 나눌수 있다. 이를 다시 결합하면 원래의 R로 돌아갈 수 있다.

## 키가 아닌 속성과 결합 종속성

4NF 이후 정규화를 판단하는 것이 키가 아닌 속성의 유무이다. 키가 아닌 속성이 존재하면 RK→(키가 아닌 속성)이라는 명시적인 함수 종속성이 존재한다. 후보키를 프로젝션으로 나누면 함수 종속성이 사라지므로 무손실 분해를 할 수 없다.

4NF, 5NF가 되도록 정규화하는 작업은 키가 아닌 속성이 존재하지 않는 릴레이션만 대상이 된다. 4NF, 5NF로의 정규화는 후보키에 여러 속성이 포함되는 경우인 복합키일 때만 필요한 작업이라 할 수 있다.

> BCNF는 자동으로 5NF 요건을 만족하게 된다.
>
> - 키가 아닌 속성이 존재할 때
> - 키에 포함되는 속성이 1개뿐일 때

> 키가 아닌 속성이 있을 때 결합 종속성이 존재하지 않는 이유?
>
> {a, b, c, x}로 구성된 릴레이션이 있고 x가 키가 아닌속성일 때, {a, b, c}를 분해할 수 없다. 이유는 a, b, c중 하나라도 모른다면 x라는 값이 결정되지 않기 때문이다. 때문에 키가 아닌 속성이 있을 때는 결합 종속성을 고려할 필요가 없다. 만일 {a, b}→{x}를 갖는다고 하면 {a, b, c}와 {a, b, x}라는 속성으로 구성된 두개의 릴레이션으로 무손실 분해를 할 수 있다.



## 결합종속성에 의한 정규화(4NF ~ 6NF)

### 제4 정규형(4NF)

4NF는 다치종속성(MVD)에 의한 정규화이다. 

> A, B, C를 릴레이션 R의 제목의 부분집합이라고 할때 ☆{AB, AC}를 만족할 때 B와 C는 A에 다치종속한다고 한다. MVD 기호는 다음처럼 표현한다. A→→B A→→C

키가 아닌 속성을 갖지 않는 릴레이션을 결합 종속성에 의해 공통의 속성을 포함한 두 개의 릴레이션으로 무손실 분해할 수 있는 것이 MVD이다. 두 개 이상의 경우는 5NF에서 다룬다.

| 이름   | 학과            | 수업                 |
| ------ | --------------- | -------------------- |
| 정은오 | 컴퓨터 아키텍쳐 | 관계형 모델          |
| 정은오 | 컴퓨터 아키텍쳐 | 자바 프로그래밍      |
| 홍윤서 | 컴파일러        | 관계형 모델          |
| 홍윤서 | 컴파일러        | RUBY ON RAILS        |
| 홍윤서 | 컴파일러        | 컴퓨터 아키텍쳐 원리 |
| 오민혁 | 데이터베이스    | 컴퓨터 아키텍쳐 원리 |
| 오민혁 | 데이터베이스    | 관계형 모델          |
| 오민혁 | 컴파일러        | 관계형 모델          |
| 오민혁 | 컴파일러        | 컴퓨터 아키텍쳐 원리 |

위의 표는 MVD를 갖는 릴레이션의 예다. {이름, 학과}와 {이름, 수업}이라는 제목을 가진 두개의 릴레이션으로 무손실 분해 할 수 있다.

### 제5 정규형(5NF)

이 이상은 릴레이션을 분해해도 의미가 없다. 5NF는 명백하지 않거나 암시적이지 않은 모든 결합 종속성이 제거된 상태를 나타낸다. 6NF는 무손실 분해를 한계까지 해내는 것이다.

5NF는 명백하거나 암시적이지 않은 결합 종속성을 제거하는 작업이다. 4NF이면서 5NF가 아닌 릴레이션에 포함되는 결합 종속성이란 조합의 문제이다. R의 부분집합 A, B, C가 있을 때 다음과 같은 결합 종속성이 제거된다

☆{AB, BC, CA}

| 이름   | 학과            | 수업                 |
| ------ | --------------- | -------------------- |
| 홍윤서 | 컴파일러        | C++                  |
| 홍윤서 | 컴파일러        | 자바                 |
| 오민혁 | 컴파일러        | C++                  |
| 오민혁 | 컴파일러        | RUBY                 |
| 오민혁 | 데이터베이스    | RUBY                 |
| 오민혁 | 데이터베이스    | 관계형 모델          |
| 정은오 | 컴파일러        | 자바                 |
| 정은오 | 컴퓨터 아키텍쳐 | 자바                 |
| 정은오 | 컴퓨터 아키텍쳐 | 운영체제             |
| 정은오 | 컴퓨터 아키텍쳐 | 컴퓨터 아키텍쳐 원리 |

4NF에서 예시를 들었던 릴레이션과 별 차이가 없지만, 값의 의미에 차이가 있다. 어떤 수업은 어떠한 학과인 사람만 수강 할 수 있다라고 생각된다. 그러면 {학과, 수업}이라는 릴레이션이 필요할 것이다.



#### 연결의 함정

위 릴레이션은 한 개의 릴레이션이 결합 종속성에 의해 세개({이름, 학과}, {이름, 수업}, {학과, 수업})으로 분해가 되었다. 이처럼 세개 이상의 릴레이션으로 분해되는 결합 종속성을 연결의 함정이라고 한다. 분해된 세 개의 릴레이션은 원래의 릴레이션과 같은 사실을 나타낸다고 보이지 않기 때문이다.

각 릴레이션은 다음과 같은 명제가 참이다

1. 오민혁은 데이터베이스 학과에 소속돼 있고 어떤 수업을 수강한다
2. 오민혁은 어떤  학과에 소속돼 있고 관계형 모델을 수강한다.
3. 어떤 학생은 데이터베이스 학과에 소속돼 있고 관계형 모델의 수업을 수강한다.

원래의 릴레이션의 명제는 다음과 같다

4. 오민혁은 데이터베이스 학과에 소속돼 있고 관계형 모델의 수업을 수강한다.

일반적으로 논리학에서 1~3의 명제가 참이되어도 4가 도출되지는 않는다. 이처럼 분해 후의 릴레이션이 원래의 릴레이션과 같은 사실을 나타내고 있지 않은 것처럼 보이는 현상을 연결의 함정이라고 한다.

그러나 실제로는 원래 릴레이션에 결합 종속성이 존재하기 때문에 분해후 결합하면 원래의 릴레이션이 되기 때문에 4가 참이된다.



#### 곱집합과 결합 종속성

결합 종속성 중에 가장 단순한 것은 각각 한 개의 속상밖에 가지지 않는 두 릴레이션의 곱집합일 것이다. 두개의 속성밖에 포함하지 않고 키가 아닌 속성이 없는 릴레이션이 무손실 분해가 가능한 경우는 한 개의 속성밖에 가지지 않는 릴레이션 사이의 곱집합인 경우만 가능하다. 이러한 릴레이션은 거의 없으므로 일반적으로 고려할 필요는 없다. 만일 이러한 릴레이션이 있다면 무손실 분해를 하자.

## 제6 정규형(6NF)

6NF는 명백한 결합 종속성만 남을 때까지 가능 한 모든 결합 종속성을 제외한 상태의 정규형이다. 6NF에서 제외되는 결합 종속성에는 암시적 결합 종속성도 포함된다.

5NF이며 6NF가 아닌 릴레이션은 키가 아닌 속성이 여러 개 존재하는 릴레이션이다. 임의의 숫자의 키가 아닌 속성을 가진 릴레이션은 같은 후보키를 갖고 있는 한 암시적인 결합 종속성에 의해 무손실 분해를 할 수 있다. 극한까지 키가 아닌 속성의 개수가 0또는 1이 될 때까지 무손실 분해가 된 상태가 6NF이다.

6NF까지 분해된 릴레이션은 불필요한 결합이 많고 실용적이지 않으므로 실제로 DB설계에서는 6NF를 목표로 릴레이션의 정규화를 수행하지 않는다.