# 관계형 모델

관계형 모델은 실제 세계의 데이터를 관계라는 개념을 사용해 표현한 데이터 모델이다. 일반적으로 ERD같은 설계 모델을 생각하는 사람이 많은데 실제로는 설계의 의미가 아니라 데이터를 어떻게 표한할까라는 개념의 의미이다.

## 릴레이션

ERD를 생각하는 사람에게서는 테이블 사이의 관계라고 생각하는데 이건 설계 관점에서 본것이므로 정답이 아니다. SQL에 있어서 릴레이션에 해당하는 것은 테이블이다. 릴레이션은 제목과 본체로 구성되어 있다. 제목은 속성이 0개 이상이 모인 집합이고, 속성은 이름과 데이터형으로 되어있다. 본체는 속성값의 집합인 행 또는 튜플의 집합이다.

튜플에 포함된 속성값은 이름과 데이터 형이 제목에서 지정한 것과 서로 일치하지 않으면 안된다. 제목에서 정의하지 않은 속성이 튜플에 존재하거나 반대인 경우에는 규칙 위반이다. 릴레이션이란 튜플의 집합이다. 튜플은 모두 같은 n개의 속성값의 집합으로 데이터 구성이 같다.

## 집합

수학에서 사용되는 개념으로 물건의 모임을 표현하는 개념이다. 각 물건은 요소나 원소라고 한다. 요소에는 특별한 제약이 없고 범용적인 구조로써 집합을 사용 할 수 있다. 

집합의 충족 요소

1. 어떤 요소가 집합에 포함돼 있는지 불확정한 요소 없이 판정할 수 있어야 한다.
2. 집합의 요소가 중복돼서는 안 된다.
3. 집합의 요소는 더는 분해될 수 없다.

## 관계형 모델과 NULL

릴레이션에 NULL을 포함할 수 없다. 관계형 모델을 올바르게 구현하려면 NULL은 배제해야한다.

## 릴레이션의 연산

데이터를 릴레이션이라고 표현한다면 그에 대한 연산은 쿼리(질의)다. 관계형 모델은 릴레이션 단위로 다양한 연산을 사용해 질의를 수행하는 데이터 모델이다. 릴레이션을 사용한 연산을 수행하므로 관계형 모델이라고 부른다.

### 제한(Restrict)

릴레이션들 중 특정 조건에 맞는 튜플을 포함한 릴레이션을 반환한다.

### 프로젝션(Projection)

릴레이션에서 특정 속성만 포함하는 릴레이션을 반환한다.

### 확장(Extend)

프로젝션과 반대로 속성을 늘리는 동작이다. 새로운 속성값은 기존의 속성값을 이용해 계산한다.

### 속성명 변경(Rename)

단순히 속성의 이름을 변경하는 동작이다.

### 합집합(Union)

두 개의 릴레이션에 포함된 모든 튜플로 구성된 릴레이션을 반환한다. 공통 속성이 있다면 중복 값은 제거된다.

### 교집합(Intersect)

두 개의 릴레이션에 모두 포함된 릴레이션을 반환한다.

### 차집합(Difference)

두 개의 릴레이션 중 한쪽의 릴레이션에만 포함되어 있는 튜플로 구성된 릴레이션을 반환한다.

### 곱집합(Product)

두 개의 릴레이션에 있는 튜플을 각각 조합한 릴레이션을 반환한다.

### 결합(Join)

공통된 속성을 가진 두 개의 릴레이션에서 공통된 속성값이 같은 튜플끼리 조합한 릴레이션을 반환한다. 일치하지 않는 튜플은 결과에서 제외된다. 이와 같은 형태의 결합을 SQL에서는 내부조인(INNER JOIN)이라고 한다. 외부 조인은 결과에 NULL이 포함될 가능성이 있으므로 릴레이션의 연산으로는 부적절하다.

## 클로저(Closure)

관계형 모델에서는 릴레이션을 사용한 연산 결과가 릴레이션이 된다.